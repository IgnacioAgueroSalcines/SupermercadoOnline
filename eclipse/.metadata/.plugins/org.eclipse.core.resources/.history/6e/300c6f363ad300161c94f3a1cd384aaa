package es.unican.ps.supermercadoOnline.dao;

import static org.mockito.Mockito.verify;

import javax.ejb.embeddable.EJBContainer;

import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;

import es.unican.ps.supermercadoOnline.domain.Pedido;
import es.unican.ps.supermercadoOnline.utils.IRealizaPedidoRemote;

public class PedidoIntegracionTest {

	private static EJBContainer ec;
	private static IRealizaPedidoRemote remote;
	private Pedido pedido;

    @BeforeClass
    public static void initContainer() throws Exception {
        ec = EJBContainer.createEJBContainer();
        
        remote = (IRealizaPedidoRemote) ec.getContext().lookup("java:global/ejb-app/supermercadoOnline-dao-0.0.1-SNAPSHOT/");
    
   
    }
    
    @Test
	public void testAdd() {
		pedido=new Pedido();
		dao.addElement(pedido);
		verify(mock).persist(pedido);
	
	}
    
 
    @AfterClass
    public static void closeContainer() throws Exception {
        //Cerramos el contenedor
        if (ec != null) {
            ec.close();
        }
    }
}
